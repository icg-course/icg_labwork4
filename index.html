<!DOCTYPE html>
<html lang="ru">
  <head>  
    <meta charset="utf-8" />
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><![endif]-->
    <title>Лабораторная работа 3</title>
    <link rel="stylesheet" href="https://www.x3dom.org/download/x3dom.css"/>
    <script src="https://www.x3dom.org/download/dev/x3dom-full.js"></script>
  </head>
  <body>
	<x3d style="left:50%; top:200px; width:1000px; height:100%; border:none; margin-left:-500px;">
		  <scene>
			  
			<transform translation="0 0 0" rotation = "1 0 0 0.6" scale = "0.8 0.8 0.8">

		<Background backUrl = "day.jpg"></Background>


	<Collision DEF = "Collision" enabled = "true">		  
		<transform translation="1 1.5 1">
          <shape>
            <appearance>
				<material diffuseColor="0.59 0.26 0.19"></material>
            </appearance>
			  <cylinder height="3" radius="0.3" ></cylinder>
          </shape>
        </transform>
			  
			  
			  
		<transform DEF = "TreeLeaf" translation="1 3 1">
          <shape>
            <appearance>
				<TextureTransform scale="8 8"></TextureTransform>
				<ImageTexture url ="https://99px.ru/sstorage/53/2013/12/tmb_90528_9398.jpg" repeatS="True" repeatT="True"></ImageTexture>
            </appearance>
			  <cone bottom="True" bottomRadius="1.2" height="3"></cone>
          </shape>
        </transform>
			 
<!-----------------------------SnowMan1----------------------------------------------->
	<Group DEF = "SnowMan" >		  
		<transform translation="-2.5 0.6 -3">
          <shape>
            <appearance>
				<TextureTransform scale="1 1"></TextureTransform>
				<ImageTexture url ="snow.jpg" repeatS="True" repeatT="True"></ImageTexture>
            </appearance>
			  <sphere radius = "0.6"></sphere>
          </shape>
        </transform>

			  
		<transform translation="-2.5 1.5 -3">
          <shape>
            <appearance>
				<TextureTransform scale="1 1"></TextureTransform>
				<ImageTexture url ="snow.jpg" repeatS="True" repeatT="True"></ImageTexture>
            </appearance>
			  <sphere radius = "0.4"></sphere>
          </shape>
        </transform>
			  
		<transform translation="-2.5 2.1 -3">
          <shape>
            <appearance>
				<TextureTransform scale="1 1"></TextureTransform>
				<ImageTexture url ="snow.jpg" repeatS="True" repeatT="True"></ImageTexture>
            </appearance>
			  <sphere radius = "0.25"></sphere>
          </shape>
        </transform>

		<shape>
			<appearance>
			</appearance>
			<pointset>
				<color color = "1 0 0, 1 0 0, 1 0 0"></color>
				<coordinate point = "-2.5 1.5 -2.6, -2.5 1.6 -2.60, -2.5 1.7 -2.65"></coordinate>
			</pointset>
		</shape>

		<transform translation="-2.5 2.4 -3">
          <shape>
            <appearance>
              <material diffuseColor="1 0 0"></material>
            </appearance>
            <cylinder height = "0.3" radius = "0.2"></cylinder>
          </shape>
    	</transform>


        <transform translation="-2.5 2.25 -3">
          <shape>
            <appearance>
              <material diffuseColor="1 0 0"></material>
            </appearance>
            <cylinder height = "0.01" radius = "0.4"></cylinder>
          </shape>
    	</transform>

		<transform translation="-2.6 1.5 -3">
          <shape>
            <appearance>
			  <material diffuseColor="0 0 0"></material>
            </appearance>
            <box size="1.52 0.01 0.02"></box>
          </shape>
        </transform>


        <transform translation="-2 1.42 -3" rotation= "0 0 1 0.45">
          <shape>
            <appearance>
			  <material diffuseColor="0 0 0"></material>
            </appearance>
            <box size="0.4 0.01 0.02"></box>
          </shape>
        </transform>    	
 	  
		<transform translation="-2.6 2.1 -2.77">
          <shape>
            <appearance>
				<TextureTransform scale="1 1"></TextureTransform>
				<material diffuseColor="0 0 0"></material>
            </appearance>
			  <torus innerRadius="0.01" outerRadius="0.03"></torus>
          </shape>
        </transform>
			  
			  
		<transform translation="-2.4 2.1 -2.77" rotation = "1 0 0 0.27">
          <shape>
            <appearance>
				<TextureTransform scale="1 1"></TextureTransform>
				<material diffuseColor="0 0 0"></material>
            </appearance>
			  <torus innerRadius="0.01" outerRadius="0.03"></torus>
          </shape>
        </transform>
		
	</Group>
		
<!-----------------------------SnowMan2----------------------------------------------->	
		
	 <transform DEF = "Snowman2" translation="6 0.2 3">
		<shape USE = "SnowMan">
		</shape>
	 </transform>
		
		
		<transform translation="0 1 3.5" rotation="1 0 0 -0.47">
          <shape>
            <appearance>
              <material diffuseColor="1 0 0"></material>
            </appearance>
            <text string="2019 by Burylev" solid="false"></text>
          </shape>
        </transform>
	
		<transform translation="1 4 -1">
			<shape>
				<appearance>
				</appearance>
				<IndexedLineSet coordIndex = "0 1
											  2 3
											  4"
								colorIndex = "0 1
											  2 3"
								colorperVertex = "true">
					<color color = "1 1 0, 1 1 0, 1 1 0, 1 1 0, 1 1 0"></color>
					<coordinate point = "-0.5 3.5 1.5, -0.5 3.5 0.5
										 -1.5 3.5 0.5, -1.5 3.5 1.5, -0.5 3.5 1.5"></coordinate>
				</IndexedLineSet>
			</shape>
		</transform>
				
		<transform translation="0 6 0" scale = "0.2 0.2 0.2">
			<shape>
				<appearance>
				</appearance>
				<IndexedFaceSet ccw="true" colorPerVertex="true" convex="true"
								creaseAngle="0" solid="false"
								coordIndex="0 1 2 3 -1"
								colorIndex="0 1 2 3">
					<Coordinate point="-2 6 2, 2 6 2, 2 8 -2, -2 8 -2"></Coordinate>
					<Color color="1 1 0, 1 1 0, 1 1 0, 1 1 0, 1 1 0"></Color>
				</IndexedFaceSet>
			</shape>
		</transform>
			
				
				
		<transform translation="-5 -1.3 -5">
          <Shape>
            <Appearance>
             <ImageTexture url ="snow.jpg" repeatS="True" repeatT="True"></ImageTexture>
            </Appearance>
            <ElevationGrid xDimension="3" zDimension="3"
                            height="1 1 1 2 1 2 1
                                    1, 0.5, 0.25, 0.25, 0.5, 1, 0,
                                    0.5, 0.25, 0, 0, 0.25, 0.5, 0,
                                    0.5, 0.25, 0, 0, 0.25, 0.5, 0,
                                    1, 0.5, 0.25, 0.25, 0.5, 1, 0,
                                    1.5, 1, 0.5, 0.5, 1, 1.5, 0"
                            xSpacing="5.0" zSpacing="5.0" solid="false"> </ElevationGrid>
          </Shape>
		</transform>
				
	<Anchor url="http://guap.ru" parameter="target='_self'">
		<transform translation="-5 -1.3 -5">
		  <Shape>
            <Appearance>
             <ImageTexture url ="help.jpg" repeatS="true" repeatT="true"></ImageTexture>
            </Appearance>
			<IndexedTriangleSet index="0 1 2"solid="false">
				<Coordinate point="1 2.5 2.7, 3 2.5 2.7, 3 1.5 2.7"></Coordinate>
			</IndexedTriangleSet>
          </Shape>
		</transform>
	</Anchor>
				
		<transform translation="-5 0 -5">
		  <Shape>
            <Appearance>
             <ImageTexture url ="sky.jpg" repeatS="true" repeatT="true"></ImageTexture>
            </Appearance>
			<IndexedTriangleStripSet index='0 1 2 3 -1' solid='false'>
			 <Coordinate point='0 8 0, 10 8 0 ,0 8 10, 10 8 10'></Coordinate>
			 <ColorRGBA color='0 .8 0 1, 0 1 1 1, 1 0 0 1, 1 .5 0 1,.8 0 1 1, 1 1 0 1, .6 .3 .1 1, 1 0 .5 1, 0 1 .5 1'></ColorRGBA>
			</IndexedTriangleStripSet>
          </Shape>
		</transform>	
				
				
				
		<Transform translation="-2.55 2 -2.75" scale = "0.1 0.1 0.1" rotation = "1 0 0 1.4">
		 <Shape> 
		  <IndexedTriangleSet solid="false" ccw="true" colorPerVertex="true" normalPerVertex="true" containerField="geometry" 
							  index="0 1 2 
									 3 4 5 
									 6 7 8 
									 9 10 11"> 
			<Coordinate point="0 0 0, 1 0 0, 0.5 1 -0.5, 0.5 0 -1, 
							   1 0 0, 0.5 1 -0.5, 0 0 0, 0.5 1 -0.5, 
							   0.5 0 -1, 0 0 0, 1 0 0, 0.5 0 -1"></Coordinate> 
			<Color color="1 1 0, 1 0 1, 1 0 0, 1 0.5 0, 0.8 0 0, 1 1 0, 0.6 0 0, 0.8 0.5 0, 1 1 0, 1 0.8 0, 1 1 0, 1 0.5 0"></Color> 
		  </IndexedTriangleSet> 
		 </Shape> 
		</Transform>
		
		
<!-----------------------------SnowMan3----------------------------------------------->
		<Transform  DEF = "SnowMan3">
			<Inline url= "snowman.x3d"></Inline>
		</Transform>
	 </Collision>		
<!----------------------------Animation----------------------------------------------->
		
        <TimeSensor DEF="TS_SM" cycleInterval="1" loop="true"></TimeSensor>
        <PositionInterpolator DEF="PI_SM" key="0, 0.3, 0.6, 1" keyValue="6 0.2 3 , 6 0.6 3, 6 0.4 3, 6 0.2 3"></PositionInterpolator>
		<ROUTE fromNode="TS_SM" fromField="fraction_changed"
               toNode="PI_SM" toField="set_fraction">
        </ROUTE>
		<ROUTE fromNode="PI_SM" fromField="value_changed"
               toNode="Snowman2" toField="translation">
        </ROUTE>
		
				
		<TimeSensor DEF="TS_Tree" cycleInterval="8" loop="true"></TimeSensor>
        <OrientationInterpolator DEF="OI_Tree" key="0, 0.5, 1 " keyValue="0 1 0 0, 0 1 0 3.14, 0 1 0 0"></OrientationInterpolator>
		<ROUTE fromNode="TS_Tree" fromField="fraction_changed"
               toNode="OI_Tree" toField="set_fraction">
        </ROUTE>
		<ROUTE fromNode="OI_Tree" fromField="value_changed"
               toNode="TreeLeaf" toField="set_rotation">
        </ROUTE>
				
				
		<TimeSensor DEF="TS_SM1" cycleInterval="9" loop="true"></TimeSensor>
        <PositionInterpolator DEF="PI_SM1" key="0, 0.2, 0.4, 0.6, 0.7, 0.9, 1" keyValue="0 0 0 , -1 0 1, -2 0 2, 3 0 4, 3 0 3, 4 0 1, 1 0 1, 0 0 0 "></PositionInterpolator>
		<ROUTE fromNode="TS_SM1" fromField="fraction_changed"
               toNode="PI_SM1" toField="set_fraction">
        </ROUTE>
		<ROUTE fromNode="PI_SM1" fromField="value_changed"
               toNode="SnowMan3" toField="translation">
        </ROUTE>		

	</transform>
   </scene>
  </x3d>
 </body> 
</html>




